# ユースケース別の指標使い分け

このガイドは、データ分析において使用される指標を「何のために使うのか（目的）」という観点から分類し、具体的なユースケースに応じて適切な指標を選定するための参考資料。
特に、匿名性評価、分布変化の把握、乱雑性の測定、再識別リスクの評価など、目的ごとに異なる特性を持つ指標の使い分けが求められる場面を想定。

---

## 1. 指標の分類と目的

| カテゴリ        | 目的（使う場面）               | 指標例                         |
| ----------- | ---------------------- | --------------------------- |
| 匿名性の評価      | 再識別リスクや組合せリスクの評価       | LSR, δ-Disclosure (δ)       |
| 結合・識別リスクの測定 | IDとの相関や構造的な結合の検出       | 順位相関（Spearmanρ）, Cramér’s V |
| 分布の変化・情報損失  | 加工前後の分布比較やユーティリティ保持の評価 | JS, KL                      |
| 並び順・単調性の評価  | データの順序構造の破壊度評価         | MRD, PE                     |
| 外れ値の検出      | 値の極端さの評価               | Z-score                     |

---

## 2. ユースケース別 推奨指標マッピング

| ユースケース                | 推奨指標              | 備考                           |
| --------------------- | ----------------- | ---------------------------- |
| 再識別の危険があるかを確認したい      | LSR, δ-Disclosure | 1:1 合致やカテゴリ多様性の観点から評価        |
| ID列に近い列がないかを調べたい      | 順位相関, Cramér’s V  | 数値的・構造的な結合性を検出               |
| 加工後に元データとどれだけ違うか確認したい | JS, KL            | 分布の差を定量評価（JS は対称性あり、KL は非対称） |
| 並び順をどれだけ崩したか評価したい     | MRD, PE           | PE は非線形的な乱雑度、MRD は順位そのものの破壊度 |
| 外れ値がないかをチェックしたい       | Z-score           | 絶対値が3以上で異常と見なされやすい           |

---

## 3. 指標選定のための YES / NO チャート

1. **この列は、登録日や点数など並びに意味があるか？**

   * YES → PE, MRD
<br>

2. **この列は、カテゴリの偏りが強そうか？**

   * YES → δ-Disclosure, LSR
<br>

3. **この列は、ID列と似た動きをしていそうか？**

   * YES → 順位相関, Cramér’s V
<br>

4. **加工前後の比較を行いたいか？**

   * YES → JS, KL
<br>

5. **極端に大きな値（例：100万 vs 平均100）があるか？**

   * YES → Z-score
<br>

---

## 4. 注意点

* **Cramér’s V はカテゴリ専用**

  * 数値列や連続値に対して適用しても正しい評価はできない。
<br>

* **δ-Disclosure はカテゴリが極端に少ない列では意味をなさない**

  * 例：全体の95%が同じ値の列では、多様性評価が無効。
<br>

* **JS/KL の前提として、分布は正規化済みである必要がある**

  * 合計が1になるように分布を正規化してから使う。
<br>  

* **Z-score は正規分布を仮定している**

  * 歪みの大きい分布や離散値には不向き。
<br>

* **順位相関は欠損を含むと正しく計算できないことがある**

  * 欠損処理を事前に行うか、補完する必要がある。
<br>

---

## 5. 関連リンク

* [データ評価前の準備ガイド 兼 チェックリスト（precheck.md）](./precheck/)
* [分析でよく使う指標（metrics.md）](./metrics/)
